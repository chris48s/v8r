"use strict";(self.webpackChunkv8r_docs=self.webpackChunkv8r_docs||[]).push([[22],{4567:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"plugins/reference","title":"Plugin API Reference","description":"v8r exports two classes: BasePlugin and Document.","source":"@site/docs/plugins/reference.mdx","sourceDirName":"plugins","slug":"/plugins/reference","permalink":"/v8r/plugins/reference","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"custom_edit_url":null},"sidebar":"docSidebar","previous":{"title":"Writing Plugins","permalink":"/v8r/plugins/writing-plugins"},"next":{"title":"Versioning","permalink":"/v8r/semver"}}');var r=n(4848),i=n(8453);const l={sidebar_position:3,custom_edit_url:null},d="Plugin API Reference",c={},a=[{value:"BasePlugin",id:"BasePlugin",level:2},{value:"Properties",id:"properties",level:3},{value:"name",id:"name",level:4},{value:"Methods",id:"methods",level:3},{value:"registerInputFileParsers",id:"registerInputFileParsers",level:4},{value:"parseInputFile",id:"parseInputFile",level:4},{value:"registerOutputFormats",id:"registerOutputFormats",level:4},{value:"getSingleResultLogMessage",id:"getSingleResultLogMessage",level:4},{value:"getAllResultsLogMessage",id:"getAllResultsLogMessage",level:4},{value:"Document",id:"Document",level:2},{value:"constructor",id:"constructor",level:3},{value:"ValidationResult",id:"ValidationResult",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"plugin-api-reference",children:"Plugin API Reference"})}),"\n",(0,r.jsxs)(s.p,{children:["v8r exports two classes: ",(0,r.jsx)(s.a,{href:"#BasePlugin",children:"BasePlugin"})," and ",(0,r.jsx)(s.a,{href:"#Document",children:"Document"}),".\nv8r plugins extend the ",(0,r.jsx)(s.a,{href:"#BasePlugin",children:"BasePlugin"})," class.\nParsing a file should return a ",(0,r.jsx)(s.a,{href:"#Document",children:"Document"})," object.\nAdditionally, validating a document yields a ",(0,r.jsx)(s.a,{href:"#ValidationResult",children:"ValidationResult"})," object."]}),"\n",(0,r.jsx)(s.h2,{id:"BasePlugin",children:"BasePlugin"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"class BasePlugin\n"})}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsx)(s.p,{children:"Base class for all v8r plugins."}),"\n",(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"row mb-2",children:[(0,r.jsx)("div",{className:"col col--6",children:(0,r.jsx)("strong",{children:"Properties"})}),(0,r.jsx)("div",{className:"col col--6",children:(0,r.jsx)("strong",{children:"Methods"})})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col col--6",children:[(0,r.jsx)("a",{href:"#name",children:"name"}),(0,r.jsx)("span",{className:"badge badge--info margin-left--sm",children:"static"})]}),(0,r.jsxs)("div",{className:"col col--6",children:[(0,r.jsx)("a",{href:"#registerInputFileParsers",children:"registerInputFileParsers"}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#parseInputFile",children:"parseInputFile"}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#registerOutputFormats",children:"registerOutputFormats"}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#getSingleResultLogMessage",children:"getSingleResultLogMessage"}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#getAllResultsLogMessage",children:"getAllResultsLogMessage"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h4,{id:"name",children:"name"}),"\n",(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"badge badge--info",children:"static"})}),"\n",(0,r.jsxs)(s.p,{children:["Name of the plugin. All plugins must declare a name starting with ",(0,r.jsx)(s.code,{children:"v8r-plugin-"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Type"}),": string"]}),"\n",(0,r.jsx)(s.h3,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h4,{id:"registerInputFileParsers",children:"registerInputFileParsers"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"registerInputFileParsers"})," hook to tell v8r about additional file formats that can be parsed. Any parsers registered with this hook become valid values for the ",(0,r.jsx)(s.code,{children:"parser"})," property in custom schemas."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Returns"}),": Array<string>"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"File parsers to register"}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"parseInputFile",children:"parseInputFile"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"parseInputFile"})," hook to tell v8r how to parse files.  If ",(0,r.jsx)(s.code,{children:"parseInputFile"})," returns anything other than undefined, that return value will be used and no further plugins will be invoked. If ",(0,r.jsx)(s.code,{children:"parseInputFile"})," returns undefined, v8r will move on to the next plugin in the stack. The result of successfully parsing a file can either be a single Document object or an array of Document objects."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Returns"}),": ",(0,r.jsx)(s.a,{href:"#Document",children:"Document"})," | Array<",(0,r.jsx)(s.a,{href:"#Document",children:"Document"}),"> | undefined"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Parsed file contents"}),"\n"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"PARAMETER"}),(0,r.jsx)(s.th,{children:"TYPE"}),(0,r.jsx)(s.th,{children:"OPTIONAL"}),(0,r.jsx)(s.th,{children:"DEFAULT"}),(0,r.jsx)(s.th,{children:"DESCRIPTION"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"contents"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"The unparsed file content."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"fileLocation"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"The file path."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"parser"}),(0,r.jsx)(s.td,{children:"string | undefined"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["If the user has specified a parser to   use for this file in a custom schema, this will be passed to   ",(0,r.jsx)(s.code,{children:"parseInputFile"})," in the ",(0,r.jsx)(s.code,{children:"parser"})," param."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"registerOutputFormats",children:"registerOutputFormats"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"registerOutputFormats"})," hook to tell v8r about additional output formats that can be generated. Any formats registered with this hook become valid values for the ",(0,r.jsx)(s.code,{children:"outputFormat"})," property in the config file and the ",(0,r.jsx)(s.code,{children:"--output-format"})," command line argument."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Returns"}),": Array<string>"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Output formats to register"}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"getSingleResultLogMessage",children:"getSingleResultLogMessage"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"getSingleResultLogMessage"})," hook to provide a log message for v8r to output after processing a single file.  If ",(0,r.jsx)(s.code,{children:"getSingleResultLogMessage"})," returns anything other than undefined, that return value will be used and no further plugins will be invoked. If ",(0,r.jsx)(s.code,{children:"getSingleResultLogMessage"})," returns undefined, v8r will move on to the next plugin in the stack.  Any message returned from this function will be written to stdout."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Returns"}),": string | undefined"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Log message"}),"\n"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"PARAMETER"}),(0,r.jsx)(s.th,{children:"TYPE"}),(0,r.jsx)(s.th,{children:"OPTIONAL"}),(0,r.jsx)(s.th,{children:"DEFAULT"}),(0,r.jsx)(s.th,{children:"DESCRIPTION"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"result"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"#ValidationResult",children:"ValidationResult"})}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Result of attempting to validate this   document."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"format"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["The user's requested output format as specified in   the config file or via the ",(0,r.jsx)(s.code,{children:"--output-format"})," command line argument."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"getAllResultsLogMessage",children:"getAllResultsLogMessage"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"getAllResultsLogMessage"})," hook to provide a log message for v8r to output after processing all files.  If ",(0,r.jsx)(s.code,{children:"getAllResultsLogMessage"})," returns anything other than undefined, that return value will be used and no further plugins will be invoked. If ",(0,r.jsx)(s.code,{children:"getAllResultsLogMessage"})," returns undefined, v8r will move on to the next plugin in the stack.  Any message returned from this function will be written to stdout."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Returns"}),": string | undefined"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Log message"}),"\n"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"PARAMETER"}),(0,r.jsx)(s.th,{children:"TYPE"}),(0,r.jsx)(s.th,{children:"OPTIONAL"}),(0,r.jsx)(s.th,{children:"DEFAULT"}),(0,r.jsx)(s.th,{children:"DESCRIPTION"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"results"}),(0,r.jsxs)(s.td,{children:["Array<",(0,r.jsx)(s.a,{href:"#ValidationResult",children:"ValidationResult"}),">"]}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Results of attempting to validate   these documents."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"format"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["The user's requested output format as specified in   the config file or via the ",(0,r.jsx)(s.code,{children:"--output-format"})," command line argument."]})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"Document",children:"Document"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"class Document\n"})}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsx)(s.h3,{id:"constructor",children:"constructor"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"new Document(document)\n"})}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsx)(s.p,{children:"Document is a thin wrapper class for a document we want to validate after parsing a file"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"PARAMETER"}),(0,r.jsx)(s.th,{children:"TYPE"}),(0,r.jsx)(s.th,{children:"OPTIONAL"}),(0,r.jsx)(s.th,{children:"DEFAULT"}),(0,r.jsx)(s.th,{children:"DESCRIPTION"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"document"}),(0,r.jsx)(s.td,{children:"any"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"The object to be wrapped"})]})})]}),"\n",(0,r.jsx)(s.h2,{id:"ValidationResult",children:"ValidationResult"}),"\n",(0,r.jsx)("div",{}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Type"}),": object"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"PROPERTY"}),(0,r.jsx)(s.th,{children:"TYPE"}),(0,r.jsx)(s.th,{children:"DESCRIPTION"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"fileLocation"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Path of the document that was validated."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"documentIndex"}),(0,r.jsx)(s.td,{children:"number | null"}),(0,r.jsxs)(s.td,{children:["Some file formats allow multiple   documents to be embedded in one file (e.g:   ",(0,r.jsx)(s.a,{href:"https://www.yaml.info/learn/document.html",children:"yaml"}),"). In these cases,   ",(0,r.jsx)(s.code,{children:"documentIndex"})," identifies is used to identify the sub document within the   file. ",(0,r.jsx)(s.code,{children:"documentIndex"})," will be ",(0,r.jsx)(s.code,{children:"null"})," when there is a one-to-one   relationship between file and document."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"schemaLocation"}),(0,r.jsx)(s.td,{children:"string | null"}),(0,r.jsxs)(s.td,{children:["Location of the schema used to   validate this file if one could be found. ",(0,r.jsx)(s.code,{children:"null"})," if no schema was found."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"valid"}),(0,r.jsx)(s.td,{children:"boolean | null"}),(0,r.jsxs)(s.td,{children:["Result of the validation (true/false) if a   schema was found. ",(0,r.jsx)(s.code,{children:"null"})," if no schema was found and no validation could be   performed."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"errors"}),(0,r.jsx)(s.td,{children:"Array<ErrorObject>"}),(0,r.jsxs)(s.td,{children:["An array of ",(0,r.jsx)(s.a,{href:"https://ajv.js.org/api.html#error-objects",children:"AJV Error   Objects"})," describing any errors   encountered when validating this document."]})]})]})]})]})}function o(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var t=n(6540);const r={},i=t.createContext(r);function l(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);